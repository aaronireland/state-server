<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# server

```go
import "github.com/aaronireland/state-server/pkg/server"
```

Package state\-server is the State Server REST API HTTP server. It uses the go\-chi framework to handle http requests to get the state \(or states\) in which a location is contained, render the state location data as JSON in the \[RFC 7946 GeoJSON\] format, render the full collection of states, create a state, or delete a state.

### Example requests

Get the state\(s\), if any, in which a location exists:

```
$ curl  -d "longitude=-77.036133&latitude=40.513799" http://localhost:8080/
["Pennsylvania"]

$ curl  -d "longitude=-77.036133&latitude=45" http://localhost:8080/
{"status":"Not Found","error":"[-77.036133, 45] not within any state"}
```

Get the GeoJSON Feature object which contains the location data for Pennsylvania

```
$ curl http://localhost:8080/api/v1/state/pennsylvania
"type":"Feature","properties":{"state":"Pennsylvania"},"geometry":{"type":"Polygon","coordinates":[[[-77.475793,39.719623],..., ]]}}
```

## Index

- [func Abort\(action Action, msg string\)](<#Abort>)
- [func StateServerAPIRouter\(store StateLocationDataProvider\) \*chi.Mux](<#StateServerAPIRouter>)
- [type Action](<#Action>)
- [type StateLocationDataProvider](<#StateLocationDataProvider>)
- [type StateServer](<#StateServer>)
  - [func NewStateServer\(config serverConfig, store StateLocationDataProvider\) \*StateServer](<#NewStateServer>)
  - [func \(s \*StateServer\) Start\(ctx context.Context\) error](<#StateServer.Start>)


<a name="Abort"></a>
## func Abort

```go
func Abort(action Action, msg string)
```



<a name="StateServerAPIRouter"></a>
## func StateServerAPIRouter

```go
func StateServerAPIRouter(store StateLocationDataProvider) *chi.Mux
```



<a name="Action"></a>
## type Action



```go
type Action string
```

<a name="Start"></a>

```go
const (
    Start    Action = "start"
    Shutdown Action = "shutdown"
)
```

<a name="StateLocationDataProvider"></a>
## type StateLocationDataProvider



```go
type StateLocationDataProvider interface {
    GetAll() ([]geospatial.State, error)
    GetByName(name string) (geospatial.State, error)
    Create(geospatial.State) (geospatial.State, error)
    Delete(name string) error
}
```

<a name="StateServer"></a>
## type StateServer



```go
type StateServer struct {
    // contains filtered or unexported fields
}
```

<a name="NewStateServer"></a>
### func NewStateServer

```go
func NewStateServer(config serverConfig, store StateLocationDataProvider) *StateServer
```



<a name="StateServer.Start"></a>
### func \(\*StateServer\) Start

```go
func (s *StateServer) Start(ctx context.Context) error
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
